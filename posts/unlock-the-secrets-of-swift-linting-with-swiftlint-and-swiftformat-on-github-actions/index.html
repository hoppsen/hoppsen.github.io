<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions" /><meta property="og:locale" content="en_US" /><meta name="description" content="I admit I like to work in a clean and (consistently) structured codebase. For this reason, when working with multiple people in one codebase, a linter and/or formatter is inevitable. For a couple of years, I’ve been utilizing a combination of SwiftLint and SwiftFormat. Most people rely solely on either SwiftLint or SwiftFormat, but I especially like the combination of SwiftLint AND SwiftFormat." /><meta property="og:description" content="I admit I like to work in a clean and (consistently) structured codebase. For this reason, when working with multiple people in one codebase, a linter and/or formatter is inevitable. For a couple of years, I’ve been utilizing a combination of SwiftLint and SwiftFormat. Most people rely solely on either SwiftLint or SwiftFormat, but I especially like the combination of SwiftLint AND SwiftFormat." /><link rel="canonical" href="https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/" /><meta property="og:url" content="https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/" /><meta property="og:site_name" content="Marcel Hoppe" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-04-29T00:00:00+04:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions" /><meta name="twitter:site" content="@hoppsen1" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-04-29T00:00:00+04:00","datePublished":"2022-04-29T00:00:00+04:00","description":"I admit I like to work in a clean and (consistently) structured codebase. For this reason, when working with multiple people in one codebase, a linter and/or formatter is inevitable. For a couple of years, I’ve been utilizing a combination of SwiftLint and SwiftFormat. Most people rely solely on either SwiftLint or SwiftFormat, but I especially like the combination of SwiftLint AND SwiftFormat.","headline":"Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions","mainEntityOfPage":{"@type":"WebPage","@id":"https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/"},"url":"https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/"}</script><title>Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions | Marcel Hoppe</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Marcel Hoppe</a></div><div class="site-subtitle font-italic">Expert in iOS, Mobile Apps, and Mobile CI/CD.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/hoppsen" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/hoppsen1" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hello','hoppsen.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Marcel Hoppe </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 29, 2022, 12:00 AM +0400" prep="on" > Apr 29, 2022 <i class="unloaded">2022-04-29T00:00:00+04:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1098 words">6 min</span></div></div><div class="post-content"><p>I admit I like to work in a clean and (consistently) structured codebase. For this reason, when working with multiple people in one codebase, a linter and/or formatter is inevitable. For a couple of years, I’ve been utilizing a combination of <a href="https://github.com/realm/SwiftLint">SwiftLint</a> and <a href="https://github.com/nicklockwood/SwiftFormat">SwiftFormat</a>. Most people rely solely on either SwiftLint or SwiftFormat, but I especially like the combination of SwiftLint <strong>AND</strong> SwiftFormat.</p><h2 id="how-to-get-there">How to Get There</h2><p>For any new project I am starting or joining (given that there is no other linter/formatter in place), I would introduce a <a href="https://gist.github.com/hoppsen/08b07f362bb24c56a2177c3af551bc5f"><code class="language-plaintext highlighter-rouge">.swiftlint.yml</code></a> and <a href="https://gist.github.com/hoppsen/1f4768d1240ee4289c361d811b266649"><code class="language-plaintext highlighter-rouge">.swiftformat</code></a> configuration file to the root folder of the project. You can find my default configuration files <a href="https://gist.github.com/hoppsen/08b07f362bb24c56a2177c3af551bc5f">here</a> and <a href="https://gist.github.com/hoppsen/1f4768d1240ee4289c361d811b266649">here</a>. Adding these files would be sufficient to lint/format your codebase locally after installing SwiftLint and SwiftFormat on your machine. The latter could be achieved via <a href="https://brew.sh">brew</a>.</p><h3 id="versioning">Versioning</h3><p>The downside of this type of installation is that it doesn’t come with a mechanism for versioning. So the version I am installing and using could be different from the version my peers are using on their machines. Additionally, the CI/CD would either use the latest or yet another version of these tools. Which would end up in unnecessarily lint errors on the CI/CD. To overcome this I found a tool by Yonas Kolb (<a href="https://github.com/yonaskolb">GitHub</a>, <a href="https://twitter.com/yonaskolb">Twitter</a>) called <a href="https://github.com/yonaskolb/Mint">“Mint”</a>. With this, you can easily lock the versions of SwiftLint and SwiftFormat with a file called <code class="language-plaintext highlighter-rouge">Mintfile</code> at the root of your project:</p><h4 id="mintfile">Mintfile</h4><pre><code class="language-plain"># Source https://github.com/yonaskolb/Mint

nicklockwood/SwiftFormat@0.49.2
realm/SwiftLint@0.46.1
</code></pre><blockquote><p>⚠️   After installing Mint and adding the <code class="language-plaintext highlighter-rouge">Mintfile</code>, you need to call SwiftLint and SwiftFormat via <code class="language-plaintext highlighter-rouge">mint run swiftlint ...</code> or <code class="language-plaintext highlighter-rouge">mint run swiftformat ...</code> respectively. Otherwise, the version is not locked via Mint.</p></blockquote><h2 id="making-use-of-it-within-xcode-build-phases">Making Use of It within Xcode Build Phases</h2><p>The first stage of linting is within the <a href="https://developer.apple.com/documentation/xcode/customizing-the-build-phases-of-a-target">Build Phases of Xcode</a>. Here only SwiftLint is run; otherwise, SwiftFormat would mess with our code on every build, which would be very annoying. The following snippet runs SwiftLint on every build, which results in warnings/errors at the corresponding line of code. With this, SwiftLint warnings/errors can be detected and fixed while coding.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CI</span><span class="s2">"</span> <span class="o">=</span> <span class="s1">'true'</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s1">'CI environment detected. Not running SwiftLint.'</span>
<span class="k">elif</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$ACTION</span><span class="s2">"</span> <span class="o">=</span> <span class="s1">'build'</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CONFIGURATION</span><span class="s2">"</span> <span class="o">=</span> <span class="s1">'Debug'</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"No CI environment detected. 'Build' action with 'Debug' configuration detected. Running SwiftLint..."</span>
  <span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PATH</span><span class="s2">:/opt/homebrew/bin"</span> <span class="c"># Adds support for Apple Silicon brew directory</span>
  <span class="k">if </span>mint which swiftlint<span class="p">;</span> <span class="k">then
    </span>mint run swiftlint
  <span class="k">else
    </span><span class="nb">echo</span> <span class="s1">'warning: SwiftLint not installed, download from https://github.com/realm/SwiftLint'</span>
  <span class="k">fi
else
  </span><span class="nb">echo</span> <span class="s1">'No CI environment detected. Nevertheless, not running SwiftLint.'</span>
<span class="k">fi</span>

</pre></table></code></div></div><h2 id="making-use-of-it-within-pre-commit-hook">Making Use of It within Pre-commit Hook</h2><p>The next stage is running SwiftFormat while committing. If SwiftFormat detects a rule violation, it will block the commit and automatically reformat the code for us to verify the changes and commit again.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>

<span class="nv">FILES_REFORMATTED</span><span class="o">=</span>0

<span class="nb">echo</span> <span class="s2">"[PRE-COMMIT] Linting project"</span>
<span class="nv">GIT_DIFF</span><span class="o">=</span><span class="si">$(</span>git diff <span class="nt">--diff-filter</span><span class="o">=</span>d <span class="nt">--staged</span> <span class="nt">--name-only</span><span class="si">)</span>

<span class="k">while </span><span class="nb">read </span>FILE<span class="p">;</span> <span class="k">do</span>
  <span class="c">#</span>
  <span class="c"># PLACEHOLDER: Xcode project file sorting</span>
  <span class="c"># see https://hoppsen.com/posts/sort-Xcode-project-file/#automate-the-sorting</span>
  <span class="c"># </span>

  <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span> <span class="o">==</span> <span class="k">*</span><span class="se">\.</span>swift <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c"># export PATH to find mint</span>
    <span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"/opt/homebrew/bin:</span><span class="nv">$PATH</span><span class="s2">"</span>

    <span class="nv">BEFORE_SWIFTFORMAT_CHECKSUM</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span> | shasum<span class="si">)</span>
    mint run swiftformat <span class="s2">"</span><span class="k">${</span><span class="nv">FILE</span><span class="k">}</span><span class="s2">"</span> <span class="nt">--config</span> .swiftformat &amp;&gt; /dev/null
    <span class="nv">AFTER_SWIFTFORMAT_CHECKSUM</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat</span> <span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span> | shasum<span class="si">)</span>

    <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$BEFORE_SWIFTFORMAT_CHECKSUM</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"</span><span class="nv">$AFTER_SWIFTFORMAT_CHECKSUM</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"[PRE-COMMIT] [Warning] </span><span class="nv">$FILE</span><span class="s2"> reformatted automatically. Please review, stage and commit"</span>
      <span class="o">((</span>FILES_REFORMATTED++<span class="o">))</span>
    <span class="k">fi
  fi  
done</span> <span class="o">&lt;&lt;&lt;</span> <span class="s2">"</span><span class="nv">$GIT_DIFF</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$FILES_REFORMATTED</span><span class="s2">"</span> <span class="nt">-gt</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">exit </span>1
<span class="k">fi

</span><span class="nb">exit </span>0

</pre></table></code></div></div><p>Read more about the placeholder and how to use pre-commit hook: <a href="https://hoppsen.com/posts/sort-Xcode-project-file/#automate-the-sorting">Hassle Free Merging of the Xcode Project File by Sorting It</a>.</p><h2 id="making-use-of-it-within-github-actions">Making Use of It within Github Actions</h2><p>Whereas the first two stages are somewhat optional and solely prevent us from running into too many CI/CD linter errors, this is the place where the magic happens. The below YAML file configures to run SwiftLint and SwiftFormat on every pull request commit, ensuring that all the code is clean and formatted as intended before being merged into the main branch.</p><p>The critical point about this snippet is that it uses our previously introduced <code class="language-plaintext highlighter-rouge">Mintfile</code>. It reads the desired version and builds it on the first run. After this initial build of one to three minutes, the time for linting goes down to ~10-15 seconds for each run, thanks to caching.</p><p>Experienced users of GitHub Actions know that running Actions on macOS takes 10x more minutes than on Ubuntu. Therefore, this linting file uses Ubuntu to save valuable CI/CD minutes.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Linting</span>

<span class="na">on</span><span class="pi">:</span> <span class="s">pull_request</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">SwiftLint</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-20.04</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Read version from Mintfile</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">echo "SWIFTLINT_VERSION=$(awk '/SwiftLint/ {split($0, a, "@"); print a[2]}' Mintfile)" &gt;&gt; $GITHUB_ENV</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v2</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">.build/release/swiftlint</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">$-linting-swiftlint-$</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build realm/SwiftLint</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">if [ -f ".build/release/swiftlint" ]; then</span>
            <span class="s">sudo cp -f .build/release/swiftlint /usr/local/bin/swiftlint</span>
          <span class="s">else</span>
            <span class="s">git clone --depth 1 --branch $ https://github.com/realm/SwiftLint</span>
            <span class="s">cd SwiftLint</span>
            <span class="s">swift build --disable-sandbox -c release</span>
            <span class="s">mv .build .. &amp;&amp; cd ..</span>
            <span class="s">rm -rf SwiftLint</span>
            <span class="s">sudo cp -f .build/release/swiftlint /usr/local/bin/swiftlint</span>
          <span class="s">fi</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">SwiftLint</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">swiftlint --version</span>
          <span class="s">swiftlint lint --strict --config .swiftlint.yml --quiet</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">LINUX_SOURCEKIT_LIB_PATH</span><span class="pi">:</span> <span class="s">/usr/share/swift/usr/lib</span> <span class="c1"># FIXED: Fatal error: Loading libsourcekitdInProc.so failed</span>
  <span class="na">SwiftFormat</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-20.04</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Read version from Mintfile</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">echo "SWIFTFORMAT_VERSION=$(awk '/SwiftFormat/ {split($0, a, "@"); print a[2]}' Mintfile)" &gt;&gt; $GITHUB_ENV</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/cache@v2</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">.build/release/swiftformat</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">$-linting-swiftformat-$</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Build nicklockwood/SwiftFormat</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">if [ -f ".build/release/swiftformat" ]; then</span>
            <span class="s">if ! [ -x "$(command -v swift-format)" ]; then</span>
              <span class="s">sudo cp -f .build/release/swiftformat /usr/local/bin/swiftformat</span>
            <span class="s">fi</span>
          <span class="s">else</span>
            <span class="s">git clone --depth 1 --branch $ https://github.com/nicklockwood/SwiftFormat</span>
            <span class="s">cd SwiftFormat</span>
            <span class="s">swift build --disable-sandbox -c release</span>
            <span class="s">mv .build .. &amp;&amp; cd ..</span>
            <span class="s">rm -rf SwiftFormat</span>
            <span class="s">sudo cp -f .build/release/swiftformat /usr/local/bin/swiftformat</span>
          <span class="s">fi</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">SwiftFormat</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">swiftformat --version</span>
          <span class="s">swiftformat . --config .swiftformat --lint</span>
</pre></table></code></div></div><h2 id="conclusion">Conclusion</h2><p>Linting is a common practice when building apps with multiple people. SwiftLint and SwiftFormat, in the various stages, play very well together to get a more readable codebase in the project.</p><p>Feel free to contact me or tweet me on <a href="https://twitter.com/hoppsen1">Twitter</a> if you have any additional tips or feedback.</p><p>Thanks!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ci-cd/'>CI/CD</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ci-cd/" class="post-tag no-text-decoration" >CI/CD</a> <a href="/tags/optimization/" class="post-tag no-text-decoration" >Optimization</a> <a href="/tags/helper/" class="post-tag no-text-decoration" >Helper</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions - Marcel Hoppe&url=https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions - Marcel Hoppe&u=https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Unlock the Secrets of Swift Linting with SwiftLint and SwiftFormat on GitHub Actions - Marcel Hoppe&url=https://hoppsen.com/posts/unlock-the-secrets-of-swift-linting-with-swiftlint-and-swiftformat-on-github-actions/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/welcome-to-my-blog/">Welcome to my blog!</a><li><a href="/posts/sort-Xcode-project-file/">Hassle Free Merging of the Xcode Project File by Sorting It</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/helper/">Helper</a> <a class="post-tag" href="/tags/personal/">Personal</a> <a class="post-tag" href="/tags/uikit/">UIKit</a> <a class="post-tag" href="/tags/accessibility/">Accessibility</a> <a class="post-tag" href="/tags/ci-cd/">CI/CD</a> <a class="post-tag" href="/tags/optimization/">Optimization</a> <a class="post-tag" href="/tags/xcode/">Xcode</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/streamline-your-colors-by-using-system-colors-under-ios12-and-below/"><div class="card-body"> <span class="timeago small" > Jun 26, 2021 <i class="unloaded">2021-06-26T00:00:00+04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Streamline Your Colors by Using System Colors under iOS 12 and Below</h3><div class="text-muted small"><p> At the time of writing, this might already be close to not being needed anymore soon. I am talking about getting Apple’s (not so) new System Colors under iOS 12 and below. What I mean by not be...</p></div></div></a></div><div class="card"> <a href="/posts/improve-your-apps-accessibility-by-gradually-introducing-dynamic-type-sizes/"><div class="card-body"> <span class="timeago small" > Jul 9, 2021 <i class="unloaded">2021-07-09T00:00:00+04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Improve Your Apps Accessibility by Gradually Introducing Dynamic Type Sizes</h3><div class="text-muted small"><p> After talking about my UIColor extension helper in my last post, I would like to discuss another helper extension I have used for quite some time now. This time it is not about colors; it is about ...</p></div></div></a></div><div class="card"> <a href="/posts/what-is-the-reason-for-an-emoji-in-my-linkedin-name/"><div class="card-body"> <span class="timeago small" > Mar 25, 2022 <i class="unloaded">2022-03-25T00:00:00+04:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>What Is the Reason for an Emoji in My LinkedIn Name</h3><div class="text-muted small"><p> As much as I like automatization and would like to automate everything possible, certain things shouldn’t be automated in my eyes. One example is personal communication! Like most people in tech, I...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/what-is-the-reason-for-an-emoji-in-my-linkedin-name/" class="btn btn-outline-primary" prompt="Older"><p>What Is the Reason for an Emoji in My LinkedIn Name</p></a> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/hoppsen1">Marcel Hoppe</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/helper/">Helper</a> <a class="post-tag" href="/tags/personal/">Personal</a> <a class="post-tag" href="/tags/uikit/">UIKit</a> <a class="post-tag" href="/tags/accessibility/">Accessibility</a> <a class="post-tag" href="/tags/ci-cd/">CI/CD</a> <a class="post-tag" href="/tags/optimization/">Optimization</a> <a class="post-tag" href="/tags/xcode/">Xcode</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://hoppsen.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
